** Legacy schema and scripts.

Scripts and schema for handling legacy ndt tables generated by internal
pipeline.  These were originally stored in dremel and used the plx bridge
to provide a bigquery interface.

common.json specifies a common schema that has all of the non-empty
legacy plx fields, and adds fields introduced with the ETL pipeline
schema.  The legacy fields differ only in making the top level log_time
into a timestamp, for ease of use and compatibility with the new
schema.  Note, however, that the log_time field is missing from MANY
legacy table rows.

The convert-legacy-to-common.sh script is used to copy a single day
from the old plx tables into a new, partitioned
measurement-lab:legacy.ndt table.  It provides the explicit interleaving
of legacy and new schema fields, generally adding null values to the
new fields, with a couple exceptions where the syntax would be excessively
verbose (task_filename and parse_time).

The convert-all.sh script creates copy queries for an entire year.  It
requests copies for 31 days each month, so there are generally 7
failures for the days that don't exist.

The conversion queries are submitted as asynchronous batch mode queries,
so they may take some time to complete - typically at least half an
hour for one year's worth of queries.

To check status, use:
'''bash
bq ls -j -n 400 
'''


** Data

Note that the partition_date field should not be relied on.  It was added
early in development, and overlooked later when it was no longer needed.
partition_date should instead be derived from the legacy.ndt _partition_time
field.