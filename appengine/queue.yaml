total_storage_limit: 2000M

queue:
- name: etl-ndt-queue
  target: etl-ndt-parser
  # Average rate at which to release tasks to the service.  Default is 5/sec
  # This is actually the rate at which tokens are added to the bucket.
  # 1.0 allow processing a day's data (about 11K tasks) in 3 to 4 hours.
  rate: 1.0/s
  # Number of tokens that can accumulate in the bucket.  Default is 5.  This should
  # have very little impact for our environment.
  bucket_size: 10
  # Maximum number of concurrent requests.
  max_concurrent_requests: 360

# We want multiple separate queue, to ensure that batch processing doesn't
# exceed the per table quota.  Collectively they should be able to fill
# 50 instances at 12 workers per instance, or about 600 altogether.
# Some adjustments may be needed once this is running regularly.
- name: etl-ndt-batch-monday
  target: etl-ndt-batch-parser
  rate: 0.8/s
  bucket_size: 10
  max_concurrent_requests: 100

- name: etl-ndt-batch-tuesday
  target: etl-ndt-batch-parser
  rate: 0.8/s
  bucket_size: 10
  max_concurrent_requests: 100

- name: etl-ndt-batch-wednesday
  target: etl-ndt-batch-parser
  rate: 0.8/s
  bucket_size: 10
  max_concurrent_requests: 100

- name: etl-ndt-batch-thursday
  target: etl-ndt-batch-parser
  rate: 0.8/s
  bucket_size: 10
  max_concurrent_requests: 100

- name: etl-ndt-batch-friday
  target: etl-ndt-batch-parser
  rate: 0.8/s
  bucket_size: 10
  max_concurrent_requests: 100

- name: etl-ndt-batch-saturday
  target: etl-ndt-batch-parser
  rate: 0.8/s
  bucket_size: 10
  max_concurrent_requests: 100

- name: etl-ndt-batch-sunday
  target: etl-ndt-batch-parser
  rate: 0.8/s
  bucket_size: 10
  max_concurrent_requests: 100

- name: etl-traceroute-queue
  target: etl-traceroute-parser
  # Average rate at which to release tasks to the service.  Default is 5/sec
  # This is actually the rate at which tokens are added to the bucket.
  rate: 1.5/s
  # Number of tokens that can accumulate in the bucket.  Default is 5.  This should
  # have very little impact for our environment.
  bucket_size: 10
  # Maximum number of concurrent requests.
  max_concurrent_requests: 360

- name: etl-sidestream-queue
  target: etl-sidestream-parser
  # Average rate at which to release tasks to the service.  Default is 5/sec
  # This is actually the rate at which tokens are added to the bucket.
  rate: 1.5/s
  # Number of tokens that can accumulate in the bucket.  Default is 5.  This should
  # have very little impact for our environment.
  bucket_size: 10
  # Maximum number of concurrent requests.
  max_concurrent_requests: 180

- name: etl-disco-queue
  target: etl-disco-parser
  # Average rate at which to release tasks to the service.  Default is 5/sec
  # This is actually the rate at which tokens are added to the bucket.
  rate: 5/s
  # Number of tokens that can accumulate in the bucket.  Default is 5.  This should
  # have very little impact for our environment.
  bucket_size: 10
  # Maximum number of concurrent requests.
  max_concurrent_requests: 180

